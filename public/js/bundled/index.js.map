{"mappings":"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","sources":["<anon>","public/js/index.js","public/js/login.js","public/js/alert.js","public/js/mapbox.js","public/js/updateSettings.js","public/js/stripe.js"],"sourcesContent":["// import '@babel/polyfill';\n/* eslint-disable */ // import axios from 'axios';\n/* eslint-disable */ const $e9c91518574fdb31$export$de026b00723010c1 = (type, msg, time = 7)=>{\n    $e9c91518574fdb31$var$hideAlert();\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n    window.setTimeout($e9c91518574fdb31$var$hideAlert, time * 1000);\n};\nconst $e9c91518574fdb31$var$hideAlert = ()=>{\n    const el = document.querySelector('.alert');\n    if (el) el.parentElement.removeChild(el);\n};\n\n\nconst $bf5b431e6a69fea8$export$596d806903d1f59e = async (email, password)=>{\n    try {\n        const res = await axios({\n            method: 'POST',\n            url: '/api/v1/users/login',\n            data: {\n                email: email,\n                password: password\n            },\n            withCredentials: true // Tarayıcının cookie'leri almasını sağlar\n        });\n        if (res.data.status === 'success') {\n            (0, $e9c91518574fdb31$export$de026b00723010c1)('success', 'Logged in successfully!');\n            // Kullanıcıyı anasayfaya yönlendir\n            window.setTimeout(()=>{\n                location.assign('/');\n            }, 1500);\n        }\n    } catch (err) {\n        (0, $e9c91518574fdb31$export$de026b00723010c1)('error', err.response.data.message);\n    }\n};\nconst $bf5b431e6a69fea8$export$a0973bcfe11b05c9 = async ()=>{\n    try {\n        const res = await axios({\n            method: 'GET',\n            url: '/api/v1/users/logout',\n            withCredentials: true\n        });\n        if (res.data.status === 'success') location.reload(true);\n    } catch (err) {\n        (0, $e9c91518574fdb31$export$de026b00723010c1)('error', 'Error logging out! Try again later.');\n    }\n};\n\n\n/* eslint-disable */ // import L from 'leaflet';\nconst $3c4e158d14605c12$export$4c5dd147b21b9176 = (locations)=>{\n    // Fix Leaflet icon paths\n    L.Icon.Default.imagePath = '/img/leaflet/';\n    // Create map\n    const map = L.map('map', {\n        scrollWheelZoom: false\n    });\n    // Add OpenStreetMap tiles\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n        maxZoom: 18\n    }).addTo(map);\n    // Create bounds for all markers\n    const bounds = L.latLngBounds();\n    // Add markers for each location\n    locations.forEach((loc)=>{\n        // Create a marker - assuming GeoJSON format with coordinates [lng, lat]\n        const lat = loc.coordinates[1];\n        const lng = loc.coordinates[0];\n        // Add marker to map\n        const marker = L.marker([\n            lat,\n            lng\n        ]).addTo(map);\n        // Add popup with location info\n        marker.bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`);\n        // Extend bounds to include this marker\n        bounds.extend([\n            lat,\n            lng\n        ]);\n    });\n    // Fit the map to show all markers with some padding\n    map.fitBounds(bounds, {\n        padding: [\n            50,\n            50\n        ]\n    });\n};\n\n\n// updateSettings\n\nconst $955535ce7513e32c$export$f558026a994b6051 = async (data, type)=>{\n    try {\n        const url = type === 'password' ? '/api/v1/users/updateMyPassword' : '/api/v1/users/updateMe';\n        const res = await axios({\n            method: 'PATCH',\n            url: url,\n            data: data\n        });\n        if (res.data.status === 'success') {\n            (0, $e9c91518574fdb31$export$de026b00723010c1)('success', `${type.toUpperCase()} updated successfully!`);\n            // Reload the page after successful update\n            window.setTimeout(()=>{\n                location.reload();\n            }, 1500);\n        }\n    } catch (err) {\n        (0, $e9c91518574fdb31$export$de026b00723010c1)('error', err.response.data.message);\n    }\n};\n\n\nconst $9fd71c92b6f885af$var$stripe = Stripe('pk_test_51RT4wXK51ANe3rhNX0aVAKNwHLQ3xcG7MaFWbY2Z1vToJFSb3DyFjBHXhvjWOV2KLLqp5LE6DckiXKoUJo7sjYGL00yM1vkmAp');\nconst $9fd71c92b6f885af$export$8d5bdbf26681c0c2 = async (tourId)=>{\n    try {\n        const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\n        await $9fd71c92b6f885af$var$stripe.redirectToCheckout({\n            sessionId: session.data.session.id\n        });\n    } catch (error) {\n        console.log(error);\n        showAlert('error', error);\n    }\n};\n\n\n// DOM ELEMENTS\nconst $407eccdc61ba7a94$var$mapBox = document.getElementById('map');\nconst $407eccdc61ba7a94$var$loginForm = document.querySelector('.form--login');\nconst $407eccdc61ba7a94$var$logoutBtn = document.querySelector('.nav__el--logout');\nconst $407eccdc61ba7a94$var$userDataForm = document.querySelector('.form-user-data');\nconst $407eccdc61ba7a94$var$userPasswordForm = document.querySelector('.form-user-password');\nconst $407eccdc61ba7a94$var$bookBtn = document.getElementById('book-tour');\n// DELEGATION\nif ($407eccdc61ba7a94$var$mapBox) {\n    const locations = JSON.parse($407eccdc61ba7a94$var$mapBox.dataset.locations);\n    (0, $3c4e158d14605c12$export$4c5dd147b21b9176)(locations);\n}\nif ($407eccdc61ba7a94$var$loginForm) $407eccdc61ba7a94$var$loginForm.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    (0, $bf5b431e6a69fea8$export$596d806903d1f59e)(email, password);\n});\nif ($407eccdc61ba7a94$var$logoutBtn) $407eccdc61ba7a94$var$logoutBtn.addEventListener('click', (e)=>{\n    e.preventDefault();\n    (0, $bf5b431e6a69fea8$export$a0973bcfe11b05c9)();\n});\nif ($407eccdc61ba7a94$var$userDataForm) $407eccdc61ba7a94$var$userDataForm.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    const form = new FormData();\n    form.append('name', document.getElementById('name').value);\n    form.append('email', document.getElementById('email').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n    (0, $955535ce7513e32c$export$f558026a994b6051)(form, 'data');\n});\nif ($407eccdc61ba7a94$var$userPasswordForm) $407eccdc61ba7a94$var$userPasswordForm.addEventListener('submit', async (e)=>{\n    e.preventDefault();\n    const btn = e.target.querySelector('.btn--save-password');\n    btn.textContent = 'Updating...';\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await (0, $955535ce7513e32c$export$f558026a994b6051)({\n        passwordCurrent: passwordCurrent,\n        password: password,\n        passwordConfirm: passwordConfirm\n    }, 'password');\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n    btn.textContent = 'Save password';\n});\nif ($407eccdc61ba7a94$var$bookBtn) $407eccdc61ba7a94$var$bookBtn.addEventListener('click', (e)=>{\n    e.target.textContent = 'Processing...';\n    const { tourId: tourId } = e.target.dataset;\n    (0, $9fd71c92b6f885af$export$8d5bdbf26681c0c2)(tourId);\n});\n\n\n//# sourceMappingURL=index.js.map\n","// import '@babel/polyfill';\r\nimport { login, logout } from './login';\r\nimport { displayMap } from './mapbox';\r\nimport { updateSettings } from './updateSettings';\r\nimport { bookTour } from './stripe';\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.querySelector('.form--login');\r\nconst logoutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\nconst bookBtn = document.getElementById('book-tour');\r\n// DELEGATION\r\n\r\nif (mapBox) {\r\n    const locations = JSON.parse(mapBox.dataset.locations);\r\n    displayMap(locations);\r\n}\r\n\r\nif (loginForm) {\r\n    loginForm.addEventListener('submit', e => {\r\n        e.preventDefault();\r\n        const email = document.getElementById('email').value;\r\n        const password = document.getElementById('password').value;\r\n        login(email, password);\r\n    });\r\n}\r\n\r\nif (logoutBtn) {\r\n    logoutBtn.addEventListener('click', e => {\r\n        e.preventDefault();\r\n        logout();\r\n    });\r\n}\r\n\r\nif (userDataForm) {\r\n    userDataForm.addEventListener('submit', e => {\r\n        e.preventDefault();\r\n        const form = new FormData();\r\n        form.append('name', document.getElementById('name').value);\r\n        form.append('email', document.getElementById('email').value);\r\n        form.append('photo', document.getElementById('photo').files[0]);\r\n        updateSettings(form, 'data');\r\n\r\n    })\r\n}\r\n\r\nif (userPasswordForm) {\r\n    userPasswordForm.addEventListener('submit', async e => {\r\n        e.preventDefault();\r\n        const btn = e.target.querySelector('.btn--save-password');\r\n        btn.textContent = 'Updating...';\r\n        const passwordCurrent = document.getElementById('password-current').value;\r\n        const password = document.getElementById('password').value;\r\n        const passwordConfirm = document.getElementById('password-confirm').value;\r\n        await updateSettings({ passwordCurrent, password, passwordConfirm }, 'password');\r\n        document.getElementById('password-current').value = '';\r\n        document.getElementById('password').value = '';\r\n        document.getElementById('password-confirm').value = '';\r\n        btn.textContent = 'Save password';\r\n    })\r\n}\r\n\r\nif (bookBtn) {\r\n    bookBtn.addEventListener('click', e => {\r\n        e.target.textContent = 'Processing...';\r\n        const { tourId } = e.target.dataset;\r\n        bookTour(tourId);\r\n    })\r\n}","/* eslint-disable */\r\n// import axios from 'axios';\r\nimport { showAlert } from './alert';\r\n\r\nexport const login = async (email, password) => {\r\n    try {\r\n        const res = await axios({\r\n            method: 'POST',\r\n            url: '/api/v1/users/login',\r\n            data: {\r\n                email,\r\n                password\r\n            },\r\n            withCredentials: true  // Tarayıcının cookie'leri almasını sağlar\r\n        });\r\n        \r\n        if (res.data.status === 'success') {\r\n            showAlert('success', 'Logged in successfully!');\r\n            // Kullanıcıyı anasayfaya yönlendir\r\n            window.setTimeout(() => {\r\n                location.assign('/');\r\n            }, 1500);\r\n        }\r\n    } catch (err) {\r\n        showAlert('error', err.response.data.message);\r\n    }\r\n}\r\n\r\nexport const logout = async () => {\r\n    try {\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: '/api/v1/users/logout',\r\n            withCredentials: true\r\n        })\r\n        if (res.data.status === 'success') {\r\n            location.reload(true);\r\n        }\r\n    } catch (err) {\r\n        showAlert('error', 'Error logging out! Try again later.')\r\n    }\r\n}","/* eslint-disable */\r\nexport const showAlert = (type, msg, time = 7) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n  window.setTimeout(hideAlert, time * 1000);\r\n};\r\n\r\nconst hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n","/* eslint-disable */\n// import L from 'leaflet';\n\nexport const displayMap = locations => {\n  // Fix Leaflet icon paths\n  L.Icon.Default.imagePath = '/img/leaflet/';\n\n  // Create map\n  const map = L.map('map', {\n    scrollWheelZoom: false\n  });\n  \n  // Add OpenStreetMap tiles\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n    maxZoom: 18\n  }).addTo(map);\n  \n  // Create bounds for all markers\n  const bounds = L.latLngBounds();\n  \n  // Add markers for each location\n  locations.forEach(loc => {\n    // Create a marker - assuming GeoJSON format with coordinates [lng, lat]\n    const lat = loc.coordinates[1];\n    const lng = loc.coordinates[0];\n    \n    // Add marker to map\n    const marker = L.marker([lat, lng]).addTo(map);\n    \n    // Add popup with location info\n    marker.bindPopup(`<p>Day ${loc.day}: ${loc.description}</p>`);\n    \n    // Extend bounds to include this marker\n    bounds.extend([lat, lng]);\n  });\n  \n  // Fit the map to show all markers with some padding\n  map.fitBounds(bounds, {\n    padding: [50, 50]\n  });\n}\n","// updateSettings\r\nimport { showAlert } from './alert';\r\n\r\nexport const updateSettings = async (data, type) => {\r\n    try {\r\n        const url = type === 'password' \r\n        ? '/api/v1/users/updateMyPassword' \r\n        : '/api/v1/users/updateMe';\r\n\r\n        const res = await axios({\r\n            method: 'PATCH',\r\n            url,\r\n            data\r\n        })\r\n        \r\n        if (res.data.status === 'success') {\r\n            showAlert('success', `${type.toUpperCase()} updated successfully!`)\r\n            // Reload the page after successful update\r\n            window.setTimeout(() => {\r\n                location.reload();\r\n            }, 1500);\r\n        }\r\n    } catch (err) {\r\n        showAlert('error', err.response.data.message)\r\n    }\r\n        \r\n}","const stripe = Stripe('pk_test_51RT4wXK51ANe3rhNX0aVAKNwHLQ3xcG7MaFWbY2Z1vToJFSb3DyFjBHXhvjWOV2KLLqp5LE6DckiXKoUJo7sjYGL00yM1vkmAp')\r\n\r\nexport const bookTour = async (tourId) => {\r\n    try {\r\n        const session = await axios(\r\n            `/api/v1/bookings/checkout-session/${tourId}`\r\n        );\r\n        await stripe.redirectToCheckout({\r\n            sessionId: session.data.session.id\r\n        })\r\n    } catch (error) {\r\n        console.log(error);\r\n        showAlert('error', error);\r\n    }\r\n}\r\n"],"names":["$e9c91518574fdb31$export$de026b00723010c1","type","msg","time","$e9c91518574fdb31$var$hideAlert","markup","document","querySelector","insertAdjacentHTML","window","setTimeout","el","parentElement","removeChild","$bf5b431e6a69fea8$export$596d806903d1f59e","email","password","res","axios","method","url","data","withCredentials","status","location","assign","err","response","message","$bf5b431e6a69fea8$export$a0973bcfe11b05c9","reload","$3c4e158d14605c12$export$4c5dd147b21b9176","locations","L","Icon","Default","imagePath","map","scrollWheelZoom","tileLayer","attribution","maxZoom","addTo","bounds","latLngBounds","forEach","loc","lat","coordinates","lng","marker","bindPopup","day","description","extend","fitBounds","padding","$955535ce7513e32c$export$f558026a994b6051","toUpperCase","$9fd71c92b6f885af$var$stripe","Stripe","$9fd71c92b6f885af$export$8d5bdbf26681c0c2","tourId","session","redirectToCheckout","sessionId","id","error","console","log","showAlert","$407eccdc61ba7a94$var$mapBox","getElementById","$407eccdc61ba7a94$var$loginForm","$407eccdc61ba7a94$var$logoutBtn","$407eccdc61ba7a94$var$userDataForm","$407eccdc61ba7a94$var$userPasswordForm","$407eccdc61ba7a94$var$bookBtn","JSON","parse","dataset","addEventListener","e","preventDefault","value","form","FormData","append","files","btn","target","textContent","passwordCurrent","passwordConfirm"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}